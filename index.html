
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Burlesco</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      if (/gauchazh\.clicrbs\.com\.br/.test(document.location.host)) {
        document.addEventListener("DOMContentLoaded", function() {
          function patchJs(jsurl) {
            GM_xmlhttpRequest({
              method: "GET",
              url: jsurl,
              onload: function(response) {
                var injectme = response.responseText;
                injectme = injectme.replace(
                  /[a-z].showLoginPaywall,/g,
                  "false,"
                );
                injectme = injectme.replace(/[a-z].showPaywall,/g, "false,");
                injectme = injectme.replace(
                  /[a-z].requestCPF\|\|!1,/g,
                  "false,"
                );
                injectme = injectme.replace(
                  /![a-z].showLoginPaywall&&![a-z].showPaywall\|\|!1/g,
                  "true"
                );
                var script = document.createElement("script");
                script.type = "text/javascript";
                var textNode = document.createTextNode(injectme);
                script.appendChild(textNode);
                document.head.appendChild(script);
              }
            });
          }

          var scripts = Array.from(document.getElementsByTagName("script"));
          var script = scripts.find(el => {
            return el.src.includes("static/main");
          });
          if (script) patchJs(script.src);
        });

        window.onload = function() {
          function check() {
            if (document.getElementsByClassName("wrapper-paid-content")[0]) {
              document.getElementsByClassName(
                "wrapper-paid-content"
              )[0].innerHTML =
                "<p>Por favor aperte Ctrl-F5 para carregar o restante da notícia!</p>";
            }
            setTimeout(function() {
              check();
            }, 1000);
          }
          check();
        };
      } else if (/jota\.info/.test(document.location.host)) {
        var page_url = window.location.href;
        if (page_url.search("paywall") >= 0) {
          // Só ativa em urls com paywall
          var new_page_url = window.location.href.replace(
            "www.jota.info/paywall?redirect_to=//",
            ""
          );
          GM_xmlhttpRequest({
            method: "GET",
            url: new_page_url,
            headers: {
              "User-Agent":
                "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"
            },
            anonymous: true,
            onload: function(response) {
              var parser = new DOMParser();
              var newDocument = parser.parseFromString(
                response.responseText,
                "text/html"
              );
              newDocument.getElementsByClassName("jota-paywall")[0].remove(); // Já remove o anúncio do paywall antes de inserir
              if (newDocument) {
                document.open();
                history.pushState({ urlPath: new_page_url }, "", new_page_url); // Atualiza a url sem fazer um novo refresh
                document.write(
                  newDocument.getElementsByTagName("html")[0].innerHTML
                );
                document.close();
              }
            }
          });
        }
      } else if (/crusoe\.com\.br/.test(document.location.host)) {
        document.cookie = "crs_subscriber=1";
      }

      // run_at: document_idle
      document.addEventListener("DOMContentLoaded", function() {
        var code = null;

        if (/www\.economist\.com/.test(document.location.host))
          code = 'document.cookie = "ec_limit=allow";';
        else if (
          /ft\.com/.test(document.location.host) &&
          document.querySelector(".barrier")
        ) {
          eraseAllCookies();

          document.cookie = "";
          localStorage.clear();
          sessionStorage.clear();
          indexedDB.deleteDatabase("next-flags");
          indexedDB.deleteDatabase("next:ads");

          GM_xmlhttpRequest({
            method: "GET",
            url: window.location.href,
            headers: {
              Referer: "https://www.google.com.br/"
            },
            anonymous: true,
            onload: function(response) {
              var parser = new DOMParser();
              var newDocument = parser.parseFromString(
                response.responseText,
                "text/html"
              );
              if (newDocument.getElementsByClassName("article__content")[0]) {
                document.open();
                document.write(
                  newDocument.getElementsByTagName("html")[0].innerHTML
                );
                document.close();
              }
            }
          });
        } else if (/foreignpolicy\.com/.test(document.location.host)) {
          code = `
      document.getElementById("paywall_bg").remove();
      document.body.classList.remove("overlay-no-scroll");
      document.body.style.overflow = "visible";
      document.documentElement.classList.remove("overlay-no-scroll");
    `;
        } else if (/folha\.uol\.com\.br/.test(document.location.host)) {
          code = `
      omtrClickUOL = function(){};function showText() {
         $("#bt-read-more-content").next().show();
         $("#bt-read-more-content").next().show().prev().remove();
      }
      setTimeout(showText, 100);
    `;
        } else if (/abril\.com\.br/.test(document.location.host))
          code = `
      document.queryselectorall('.callpaywall')
        .foreach(x => x.remove());
      document.queryselectorall('.content-blocked')
        .foreach(x => x.classlist.remove('content-blocked'))
    `;
        else if (/correio24horas\.com\.br/.test(document.location.host))
          // remover tudo relacionado ao paywall e remover limite de altura no div do conteúdo da matéria
          // verificar se a altura não buga com a mudança de largura da página (layout responsivo, né)
          code = `
      jQuery('[class^=paywall]').remove();
      jQuery('[class^=blocked]').removeClass();
      jQuery('[id^=paywall]').removeClass('hide').removeClass('is-active');
      jQuery('.noticias-single__content__text').attr('style', 'height:auto;');
      jQuery('[id^=paywall]').remove();
      setInterval(function() { jQuery('[itemprop^=articleBody]').css('height', '100%'); console.log('Burlesco: forçando altura...'); }, 1000);

    `;
        else if (/nytimes\.com/.test(document.location.host)) eraseAllCookies();
        else if (
          /wsj\.com/.test(document.location.host) &&
          document.querySelector(".wsj-snippet-login")
        ) {
          eraseAllCookies();

          document.cookie = "";
          localStorage.clear();
          sessionStorage.clear();

          GM_xmlhttpRequest({
            method: "GET",
            url: window.location.href,
            headers: {
              Referer: "https://www.facebook.com/"
            },
            anonymous: true,
            onload: function(response) {
              var parser = new DOMParser();
              var newDocument = parser.parseFromString(
                response.responseText,
                "text/html"
              );
              if (newDocument.querySelector("article")) {
                document.body = newDocument.body;
              }
            }
          });
        } else if (/bloomberg\.com/.test(document.location.host)) {
          localStorage.clear();
          sessionStorage.clear();
        } else if (/diariodaregiao\.com\.br/.test(document.location.host)) {
          document.getElementsByClassName("noticia-texto")[0].style.display =
            "block";
          document.querySelector(".conteudo > .row").style.display = "none";
        } else if (/diariopopular\.com\.br/.test(document.location.host)) {
          eraseAllCookies();
        } else if (/wired\.com/.test(document.location.host)) {
          code = `
      window.onload = function() {
        style = document.createElement('style');
        style.type = 'text/css';
        css='.paywall-container-component {display: none !important}';
        style.appendChild(document.createTextNode(css));
        document.head.appendChild(style);
      }
      document.cookie = "";
      localStorage.clear();
      sessionStorage.clear();
    `;
          eraseAllCookies();
        } else if (
          /haaretz\.com/.test(document.location.host) ||
          /haaretz\.co\.il/.test(document.location.host)
        ) {
          GM_xmlhttpRequest({
            method: "GET",
            url: window.location.href,
            headers: {
              "User-Agent": "Googlebot/2.1 (+http://www.googlebot.com/bot.html)"
            },
            anonymous: true,
            onload: function(response) {
              var parser = new DOMParser();
              var newDocument = parser.parseFromString(
                response.responseText,
                "text/html"
              );
              if (newDocument) {
                document.open();
                document.write(
                  newDocument.getElementsByTagName("html")[0].innerHTML
                );
                document.close();
              }
            }
          });
        } else if (/dgabc\.com\.br/.test(document.location.host)) {
          code = `
      var email = 'colaborador@dgabc.com.br';
      var senha = '';
      localStorage.emailNoticiaExclusiva = email;
      $('.NoticiaExclusivaNaoLogado').hide();
      $('.NoticiaExclusivaLogadoSemPermissao').hide();
      $('.linhaSuperBanner').show();
      $('.footer').show();
      $('.NoticiaExclusivaLogado').show();
    `;
        } else if (/em\.com\.br/.test(document.location.host)) {
          window.id_acesso_noticia = 0;

          let style = document.createElement("style");
          style.type = "text/css";

          let css = `
      .news-blocked {
        display: none !important
      }
      .news-blocked-no-scroll {
        overflow: auto !important;
        width: auto !important;
        position: unset !important;
      }
      
      div[itemprop="articleBody"] {
        height: auto !important;
      }
    `;

          style.appendChild(document.createTextNode(css));
          document.head.appendChild(style);
        } else if (/newsweek\.pl|forbes\.pl/.test(document.location.host)) {
          let contentPremium = document.querySelector(".contentPremium");
          if (contentPremium) {
            contentPremium.classList.remove("contentPremium");
          }
        }

        if (code !== null) {
          var script = document.createElement("script");
          script.textContent = code;
          (document.head || document.documentElement).appendChild(script);
          script.parentNode.removeChild(script);
        }
      });

      function eraseAllCookies() {
        var cookieList = document.cookie.split(/;\s*/);
        for (var J = cookieList.length - 1; J >= 0; --J) {
          var cookieName = cookieList[J].replace(/\s*(\w+)=.+$/, "$1");
          eraseCookie(cookieName);
        }
      }

      function eraseCookie(cookieName) {
        // https://stackoverflow.com/a/28081337/1840019
        //--- ONE-TIME INITS:
        //--- Set possible domains. Omits some rare edge cases.?.
        var domain = document.domain;
        var domain2 = document.domain.replace(/^www\./, "");
        var domain3 = document.domain.replace(/^(\w+\.)+?(\w+\.\w+)$/, "$2");

        //--- Get possible paths for the current page:
        var pathNodes = location.pathname.split("/").map(function(pathWord) {
          return "/" + pathWord;
        });
        var cookPaths = [""].concat(
          pathNodes.map(function(pathNode) {
            if (this.pathStr) {
              this.pathStr += pathNode;
            } else {
              this.pathStr = "; path=";
              return this.pathStr + pathNode;
            }
            return this.pathStr;
          })
        );

        // eslint-disable-next-line no-func-assign
        (eraseCookie = function(cookieName) {
          //--- For each path, attempt to delete the cookie.
          cookPaths.forEach(function(pathStr) {
            //--- To delete a cookie, set its expiration date to a past value.
            var diagStr =
              cookieName +
              "=" +
              pathStr +
              "; expires=Thu, 01-Jan-1970 00:00:01 GMT;";
            document.cookie = diagStr;

            document.cookie =
              cookieName +
              "=" +
              pathStr +
              "; domain=" +
              domain +
              "; expires=Thu, 01-Jan-1970 00:00:01 GMT;";
            document.cookie =
              cookieName +
              "=" +
              pathStr +
              "; domain=" +
              domain2 +
              "; expires=Thu, 01-Jan-1970 00:00:01 GMT;";
            document.cookie =
              cookieName +
              "=" +
              pathStr +
              "; domain=" +
              domain3 +
              "; expires=Thu, 01-Jan-1970 00:00:01 GMT;";
          });
        })(cookieName);
      }
    </script>
  </head>
  <body>
    <div class="navbar">
      <input
        type="text"
        name="url"
        id="url"
        autofocus
        value="https://www1.folha.uol.com.br/"
      />
      <input type="button" value="Ir" onclick="axiosLoad()" />
    </div>
    <hr />
    <div id="res"></div>
    <script>
      function getAllUrlParams(url) {
        // get query string from url (optional) or window
        var queryString = url
          ? url.split("?")[1]
          : window.location.search.slice(1);

        // we'll store the parameters here
        var obj = {};

        // if query string exists
        if (queryString) {
          // stuff after # is not part of query string, so get rid of it
          queryString = queryString.split("#")[0];

          // split our query string into its component parts
          var arr = queryString.split("&");

          for (var i = 0; i < arr.length; i++) {
            // separate the keys and the values
            var a = arr[i].split("=");

            // set parameter name and value (use 'true' if empty)
            var paramName = a[0];
            var paramValue = typeof a[1] === "undefined" ? true : a[1];

            // (optional) keep case consistent
            paramName = paramName.toLowerCase();
            if (typeof paramValue === "string")
              paramValue = paramValue.toLowerCase();

            // if the paramName ends with square brackets, e.g. colors[] or colors[2]
            if (paramName.match(/\[(\d+)?\]$/)) {
              // create key if it doesn't exist
              var key = paramName.replace(/\[(\d+)?\]/, "");
              if (!obj[key]) obj[key] = [];

              // if it's an indexed array e.g. colors[2]
              if (paramName.match(/\[\d+\]$/)) {
                // get the index value and add the entry at the appropriate position
                var index = /\[(\d+)\]/.exec(paramName)[1];
                obj[key][index] = paramValue;
              } else {
                // otherwise add the value to the end of the array
                obj[key].push(paramValue);
              }
            } else {
              // we're dealing with a string
              if (!obj[paramName]) {
                // if it doesn't exist, create property
                obj[paramName] = paramValue;
              } else if (obj[paramName] && typeof obj[paramName] === "string") {
                // if property does exist and it's a string, convert it to an array
                obj[paramName] = [obj[paramName]];
                obj[paramName].push(paramValue);
              } else {
                // otherwise add the property
                obj[paramName].push(paramValue);
              }
            }
          }
        }

        return obj;
      }

      function axiosLoad() {
        const url = document.getElementById("url").value;
        axios
          .get(`https://api.allorigins.win/get?url=${url}`)
          .then(function(response) {
            document.getElementById("res").innerHTML = response.data.contents;
          })
          .catch(function(error) {
            // handle error
            console.error(error);
          });
      }

      if (getAllUrlParams().url) {
        document.getElementById("url").value = getAllUrlParams().url;
        axiosLoad();
      }
    </script>
  </body>
</html>
